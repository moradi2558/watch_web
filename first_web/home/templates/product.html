{% extends 'main.html' %} {% block title %}product{% endblock %}{% load static%}
{% block body%}
<link rel="stylesheet" href="{% static 'product.css' %}" />
<body style="background-color: white">
  <div class="d-flex flex-wrap mt-2">
    <div class="col-3 mt-5 d-flex flex-column">
      <div class="d-flex flex-column align-items-center">
      <!-- search-box -->
      <form method="post" action="{% url 'home:product_search' %}">
        {% csrf_token %} {{form}}
        <button type="submit">search</button>
      </form>
      <!-- category -->
      <div class="d-flex justify-content-between mt-3" style="width: 18rem;">
        {% for data in category %}
        <div>
        <a href="{{data.get_absolute_url}}">{{data.name}}</a>
        <div class="btn-group">
          <button
            type="button"
            class="btn btn-danger dropdown-toggle"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            ></button>

            <div class="dropdown-menu">
            {% for info in data.sub.all %}<a href="{{info.get_absolute_url}}"
            >{{info.name}}</a
            >
            {%endfor%}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
      <!-- double range slider -->
      <form action="">
      <div
        class="wrapper d-flex flex-column justify-content-center align-items-center"
      >
        <div class="values">
          <span id="range1"> {{min_price}} </span>
          <span> &dash; </span>
          <span id="range2"> {{max_price}} </span>
        </div>
        <div class="containere">
          <div class="slider-track"></div>
          <input
            name="price_1"
            type="range"
            min="{{min_price}}"
            max="{{max_price}}"
            value="{{min_price}}"
            id="slider-1"
            oninput="slideOne()"
          />
          <input
            name="price_2"
            type="range"
            min="{{min_price}}"
            max="{{max_price}}"
            value="{{max_price}}"
            id="slider-2"
            oninput="slideTwo()"
          />
        </div>
      </div>
    </div>
      <div class="ms-3">
        <h4 class="mt-2">brand:</h4>
        {{ filter.form.brand }}
        <h4 class="mt-2">color:</h4>
        {{ filter.form.color }}
        <h4 class="mt-2">size:</h4>
        {{ filter.form.size}}
      </div>
      <div>
        <button type="submit" class="btn btn-dark">submit</button>
      </div>
    </form>
    </div>
    <div class="col-9 row d-flex flex-wrap mt-2 p-3">
      {% for product in products %}
      <div
        class="col-3 offset-1 border-end border-start p-2 mt-2 d-flex flex-column align-items-center"
        style="height: 40vh;"
      >
        <a href="{{product.get_absolute_url}}" class="text-center text-decoration-none">
          <img style="width: 8rem; height: 8rem" class="text-center img-fluid" src="{{product.image.url}}" />
          <h1 style="font-size: 1.5rem;color: black" class="my-2">{{product.name}}</h1>
        </a>
        {% if product.discount %}
        <h4 style="text-decoration: line-through">{{product.unit_price}}</h4>
        <h3>{{product.total_price}}</h3>
        {% else %}
        <h3>{{product.total_price}}</h3>
        {% endif %}
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- <form method="post" action="{% url 'home:product_search' %}">
    {% csrf_token %} {{form}}
    <button type="submit">search</button>
  </form>
  {% for data in category %}
  <a href="{{data.get_absolute_url}}">{{data.name}}</a>
  <div class="btn-group">
    <button
      type="button"
      class="btn btn-danger dropdown-toggle"
      data-toggle="dropdown"
      aria-haspopup="true"
      aria-expanded="false"
    ></button>

    <div class="dropdown-menu">
      {% for info in data.sub.all %}<a href="{{info.get_absolute_url}}"
        >{{info.name}}</a
      >
      {%endfor%}
    </div>
  </div>
  {% endfor %}
  <div class="row mt-4">
    <div class="col-3">
      <div class="toolbox">
         <form action="">
          <div class="toolbox">
            <section class="range-slider container">
              <span class="output outputOne"></span>
              <span class="output outputTwo"></span>
              <span class="full-range"></span>
              <span class="incl-range"></span>
              <input
                name="price_1"
                value="{{min_price}}"
                min="{{min_price}}"
                max="{{max_price}}"
                step="1"
                type="range"
              />
              <input
                name="price_2"
                value="{{max_price}}"
                min="{{min_price}}"
                max="{{max_price}}"
                step="1"
                type="range"
              />
            </section>
          </form>
        </div>
            <div>
              <label for="">brand: {{ filter.form.brand }} </label>
              <label for="">color: {{ filter.form.color }} </label>
              <label for="">size: {{ filter.form.size}} </label>
            </div>
           End .toolbox-right -->

  <!-- </div>
    </div> 
  <div class="col-9">
    <div class="row">
      {% for product in products %}
      <div class="col-8">
        <a href="{{product.get_absolute_url}}">
          <h1 style="font-size: 1.5rem">{{product.name}}</h1>
          <img
            style="width: 8rem; height: 8rem"
            src="{{product.image.url}}"
            style="width :50px;height : 50px; "
          />
        </a>
        <br />
        {% if product.discount %}
        <h4 style="text-decoration: line-through">{{product.unit_price}}</h4>
        <h3>{{product.total_price}}</h3>
        {% else %}
        <h3>{{product.total_price}}</h3>
        {% endif %} {% endfor %}
      </div>
    </div>
  </div>

  <nav aria-label="Page navigation example">
    <ul class="pagination">
      {% if products.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{products.previous_page_number}}"
          >Previous</a
        >
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{products.previous_page_number}}"
          >{{products.previous_page_number}}</a
        >
      </li>
      {% else %}
      <li class="page-item disabled">
        <a class="page-link" href="">Previous</a>
      </li>
      {% endif %}
      <li class="page-item {% if page_num == page_num %} active {% endif %}">
        <a class="page-link" href="?page={{products.number}}"
          >{{products.number}}</a
        >
      </li>
      {% if products.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{products.next_page_number}}"
          >{{products.next_page_number}}</a
        >
      </li>
      <li class="page-item">
        <a class="page-link" href="?page={{products.next_page_number}}">next</a>
      </li>
      {% else %}
      <li class="page-item disabled"><a class="page-link" href="">next</a></li>
      {% endif %}
    </ul>
  </nav> -->
  <script src="{% static 'product.js' %}"></script>
</body>
{% endblock %}
